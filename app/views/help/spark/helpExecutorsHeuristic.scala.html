@*
* Copyright 2016 LinkedIn Corp.
*
* Licensed under the Apache License, Version 2.0 (the "License"); you may not
* use this file except in compliance with the License. You may obtain a copy of
* the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
* WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
* License for the specific language governing permissions and limitations under
* the License.
*@
<p>
  这项指标通过分析Executor的【input bytes, shuffle read bytes, shuffle write bytes, storage memory used, task time】的(min, 25p, median, 75p, max)分布情况得到。
  该指标的异常等级用 max / median 值的比例偏差表示, 偏差越大代表该指标项异常越大。
</p>


<p>
  Spark应用在启动时从YARN申请Executor资源,直到应用执行完成才释放,所以平衡各Executor上的负载(即数据分布均匀,每个Executor处理的数据量相差不大)很重要。
</p>

<p>Executor负载可以考虑从以下几方面调整:</p>

<ul>
  <li>合理调整Partition数,一般可考虑调整到Executor数 * core数的若干倍,尽量充分利用Core,让Executor忙起来。</li>
  <li>避免数据倾斜,需要根据业务逻辑了解到每次数据分partition时的key分布,以及分partition的策略。</li>
  <li>可以考虑开启 spark.speculation 参数,可通过自动重试避免一些异常task。</li>
</ul>
